The price of a European call option is:
P = S * NCDF(d1) - K * e^(-r*T) * NCDF(d2)
S: The Current Price of the underlying stock
K: Strike Price
d1: (ln(S/K) + rt + sig^2 * t/2)/(sig * sqrt(T))
d2: d1 - sig * sqrt(T)

Why this makes sense:
The first term takes the current price and multiplies it by NCDF(d1), or the probability 
of the stock being in the money (Stock Price > Strike Price). This subtracts from the strike
price's present value, which the (e^(-r*T)) corrects for, times the probability the call is
out of the money, NCDF(d2).

Examining d1 and d2 more closely:
d1: ln(S/K) shows that as the stock price rises against the strike price, d1 goes up.
Similarly, as the risk-free rate, time, and volatility rise so does the probability it's in the money.
However, the dividing term shows that it's not a direct relationship, that any rise in volatility doesn't necessarily mean
that the value goes up.

d2: the subtracting term of sig * sqrt(T) shows the opposite, that as the contracts's volatility and time increase, the probability
its out of the money also increases. 

Looking at the formula, we see that there can be problems if T or sigma are equal to 0.
The behaviors of the price when T is 0 is we are essentially trading the stock minus the strike price, or we choose not to
sell at all.
If there is no volatility, then the price is now at it's intrinsic value, so the we either trade stock - strike or we choose not
sell at all.


The Greeks:
Delta: The range is [0,1] for calls, and [-1,0] for puts. Essentially if the underlying stock increases(for calls) or decreases (for puts)
how much does the option change in price. So if Delta = .25, and the underlying price is $50, the option price is $2
and the price increases to $54, the option is now worth $3.

Gamma: is the rate of change of Delta as it increases by 1 point. So if Delta = .25, and the underlying price is $50, the option price is $2,
and gamma is .2, a price increase to $54, would make the option worth $3, and delta is now 0.45.

Theta: The option loses money as it approaches its expiration date, so theta is a negative number.

Rho: How does the risk-free interest rate affect the price of an option. For every % increase in interest rate, the value 
will increase by rho * %. Call is positive, puts are negative

Vega: Option price and implied volatility, for every 1% movement in implied volatility, the price increases by Vega. 


def call(S, K, T, r, sigma):
    if (T <= 0):
        return np.max(S - K, 0)
    if (sigma <= 0):
        return np.max(S - K, 0)
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    d2 = d1 - sigma * np.sqrt(T)
    return S * norm.cdf(d1) - K * np.exp(-r * T) * norm.cdf(d2)

def put(S, K, T, r, sigma):
    if T <= 0:
        return max(K - S, 0)
    if (sigma <= 0):
        return np.max(K - S, 0)
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    d2 = d1 - sigma * np.sqrt(T)
    return K * np.exp(-r * T) * norm.cdf(-d2) - S * norm.cdf(-d1)

def delta(S, K, T, r, sigma):
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    return norm.cdf(d1)

def vega(S, K, T, r, sigma):
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    return S * norm.pdf(d1) * np.sqrt(T)

def gamma(S, K, T, r, sigma):
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    return norm.pdf(d1) / (S * sigma * np.sqrt(T))

def theta(S, K, T, r, sigma):
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    d2 = d1 - sigma * np.sqrt(T)
    return -S * norm.pdf(d1) * sigma / (2 * np.sqrt(T)) - r * K * np.exp(-r * T) * norm.cdf(d2)

def rho(S, K, T, r, sigma):
    d1 = (np.log(S / K) + r * T + sigma ** 2 * T / 2)/(sigma * np.sqrt(T))
    d2 = d1 - sigma * np.sqrt(T)
    return K * T * np.exp(-r * T) * norm.cdf(d2)

